---
import { t } from "astro-i18n";

import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import ImageTextSection from "../components/ImageTextSection.astro";
import GallerySliderSection from "../components/gallery/GallerySliderSection.astro";
import QuoteSection from "../components/QuoteSection.astro";

//images for herosection
import HerosectionBrunchplate from "../assets/img/herosection-brunch-plate.webp";
import MiniTarts from "../assets/img/mini-tarts-closeup.webp";
import CinnamonRolls from "../assets/img/cinnamon-rolls-closeup.webp";
import SourdoughBuns from "../assets/img/sourdough-buns-closeup.webp";
import Logo from "../assets/icons/logo.svg";

//images for menusection
import CroissantIllustration from "../assets/illustrations/blue/croissant.svg";
import BrunchplateHerosection from "../assets/img/herosection-brunch-plate.webp";
import IceCoffeeWaffle from "../assets/img/ice-coffee-waffle.webp";
import OrganicLogo from "../assets/icons/organic.svg";
import LatteartCloseup from "../assets/img/latte-art-closeup.webp";
import CoffeePot from "../assets/illustrations/blue/coffepot.svg";
import Blueberry from "../assets/illustrations/blue/blueberry.svg";

//heavy text section illustrations
import CoffeeMug from "../assets/illustrations/blue/coffee-cup.svg";
import TwoWholeLemons from "../assets/illustrations/blue/two-whole-lemons.svg";
import BlueberryAndPears from "../assets/illustrations/blue/blueberry-and-pears.svg";

//arrangement section illustration
import ArrangementIllustration from "../assets/illustrations/brown/afternoon-tea.svg";

//runningclub section image and illustration
import RunningImage from "../assets/img/running-img.webp";
import RunningCoffeeCupIllustration from "../assets/illustrations/white/running-cup.svg";

//Afternoon tea and coffee section images and illustrations
import AfternoonTeaImage from "../assets/img/afternoon-tea.webp";
import CoffeeBacksImage from "../assets/img/coffeebagsd.png";
import Marquee from "../components/Marquee.astro";

//Images for stampcard section
import Stampcard from "../assets/img/stempelkort.webp";
import AnchorLink from "../components/AnchorLink.astro";
---

<Layout title={t("Forside")}>
  <main class="grid gap-section">
    <!-- Herosection -->
    <section class="relative h-screen w-screen overflow-hidden rounded-b-xl">
      <Image
        src={HerosectionBrunchplate}
        alt={t("brunch")}
        class="absolute inset-0 w-full h-full object-cover fade-image fade-1"
        loading="eager"
      />
      <Image
        src={SourdoughBuns}
        alt={t("tærter")}
        class="absolute inset-0 w-full h-full object-cover fade-image fade-2"
        loading="eager"
      />
      <Image
        src={MiniTarts}
        alt={t("smørrebrød")}
        class="absolute inset-0 w-full h-full object-cover fade-image fade-3"
        loading="eager"
      />
      <Image
        src={CinnamonRolls}
        alt={t("boller")}
        class="absolute inset-0 w-full h-full object-cover fade-image fade-4"
        loading="eager"
      />

      <div class="absolute inset-0 bg-black/40 z-10"></div>

      <div
        class="absolute inset-0 z-20 flex flex-col items-center justify-center text-primary text-center pl-default pr-default"
      >
        <Image
          src={Logo}
          class="w-[300px] md:w-[500px] mb-6"
          alt={t("Kær Kaffebar logo")}
          loading="eager"
        />
        <h1
          class="text-4xl md:text-6xl font-bold text-header leading-height-header-1 text-primary"
        >
          {t("...den hyggeligste kaffebar i Valby")}
        </h1>
      </div>
    </section>

    <!-- Menusection -->
    <section
      class="grid gap-large pl-default pr-default md:px-large lg:px-0 max-w-[1192px] mx-auto fade-section"
    >
      <h2
        class="text-neutral-1 text-header-1 font-header text-center text-header leading-height-header-1"
        id="text-anim"
      >
        {t("Menu")}
      </h2>
      <div
        class="grid grid-cols-2 grid-rows-[auto, 1fr, 1fr, auto] gap-default justify-center md:hidden"
      >
        <img
          class="justify-self-center w-[120px] h-[120px]"
          src={CroissantIllustration.src}
          alt={t("croissant illustration")}
        />
        <div class="h-[140px] overflow-hidden rounded-full">
          <Image
            src={IceCoffeeWaffle}
            alt={t("iskaffe og vaffel")}
            class="object-cover w-full h-full object-left"
            loading="lazy"
          />
        </div>
        <Image
          src={BrunchplateHerosection}
          alt={t("brunch tallerken")}
          class="col-span-2 rounded-default"
          loading="lazy"
        />
        <Image
          src={LatteartCloseup}
          alt={t("latte art closeup")}
          class="rounded-default"
          loading="lazy"
        />
        <Image
          src={OrganicLogo}
          alt={t("økologi logo")}
          class="justify-self-center self-center"
          loading="lazy"
        />
      </div>
      <div>
        <div
          class="hidden md:grid md:grid-cols-5 md:grid-rows-[0.1fr_0.5fr_0.5fr_0.5fr] md:gap-default md:justify-center"
        >
          <Image
            class="justify-self-center self-center col-start-1 col-end-2 row-start-1 row-end-3"
            src={CroissantIllustration}
            alt={t("croissant illustration")}
          />
          <div
            class="overflow-hidden rounded-full col-start-2 col-end-4 row-start-1 row-end-3"
          >
            <Image
              src={IceCoffeeWaffle}
              alt={t("iskaffe og vaffel")}
              class="object-cover w-full h-full"
              loading="lazy"
            />
          </div>
          <div
            class="col-start-4 col-end-5 row-start-1 row-end-3 overflow-hidden rounded-default"
          >
            <Image
              src={LatteartCloseup}
              alt={t("latte art closeup")}
              class="object-cover w-full h-full"
              loading="lazy"
            />
          </div>
          <Image
            class="justify-self-center self-center col-start-5 col-end-5 row-start-1 row-end-2 w-[80px] h-[80px]"
            src={Blueberry}
            alt={t("blåbær")}
            loading="lazy"
          />
          <Image
            src={BrunchplateHerosection}
            alt={t("brunch tallerken")}
            class="col-start-1 col-end-3 row-start-3 row-end-5 rounded-default"
            loading="lazy"
          />
          <Image
            src={OrganicLogo}
            alt={t("økologi logo")}
            class="justify-self-center self-center col-start-3 col-end-4 row-start-3 row-end-5"
            loading="lazy"
          />
          <Image
            class="col-start-4 col-end-5 row-start-3 row-end-5"
            src={CoffeePot}
            alt={t("kaffekande illustration")}
            loading="lazy"
          />
          <div
            class="overflow-hidden rounded-full col-start-[5] col-end-[6] row-start-[2] row-end-[5]"
          >
            <Image
              src={CinnamonRolls}
              alt={t("kanelsnurre")}
              class="object-cover w-full h-full"
              loading="lazy"
            />
          </div>
        </div>
      </div>
      <div class="grid sm:justify-items-center">
        <AnchorLink url="/menu" variant="primary" ariaLabel={t("Se menu")}
          >{t("Se menu")}</AnchorLink
        >
      </div>
    </section>

    <!-- Quote section -->
    <QuoteSection
      label={t("Indehaver af Kær Kaffebar")}
      content={t(
        "“Kær Kaffebar er skabt ud fra en drøm om nærvær, god kaffe – og lysten til at gøre en forskel i lokalsamfundet.”"
      )}
      bgColor="bg-neutral-2"
    />

    <!-- Afternoon tea section -->
    <section class="max-w-[1192px] md:mx-auto fade-section">
      <ImageTextSection
        headline={t("Afternoon Tea i Valby")}
        subheadline={t(
          "Perfekt til venindetid, fejring eller bare lidt ekstra selvforkælelse."
        )}
        content={t(
          "Hos Kær Kaffebar inviterer vi dig til en klassisk Afternoon Tea – fyldt med hjemmelavede kager, friskbagte scones, sandwiches og økologisk te ad libitum. Alt serveret med [kær]lighed, i ægte vintagekopper, hvor detaljerne gør hele forskellen."
        )}
        reverse={true}
        imageSrc={AfternoonTeaImage}
        aspectRatio="aspect-[1/1.2]"
        imageAlt={t("afternoon tea billede")}
        imageContainerSize="max-h-[600px]"
        buttonText={t("Book bord")}
        url="https://kaerkaffebar.superbexperience.com/"
        roundedBorder="rounded-full"
        objectPostion="object-left"
      />
    </section>

    <!-- Arrangement section -->
    <section class="px-default lg:px-0 max-w-[1192px] mx-auto fade-section">
      <article class="grid gap-default md:gap-large md:grid-cols-2">
        <div
          class="flex items-end justify-center overflow-hidden h-[350px] md:h-full bg-neutral-3 rounded-default"
        >
          <img
            class="h-[200px] sm:h-[330px] md:h-[350px] w-auto"
            src={ArrangementIllustration.src}
            alt={t("arrangemnt illustration")}
            loading="lazy"
          />
        </div>
        <div
          class="p-default bg-highlight grid gap-default rounded-default shadow-pink"
        >
          <h1
            class="text-neutral-1 font-header text-header-1 leading-height-header-1"
          >
            {t("Book vores lokale til dit næste arrangement")}
          </h1>
          <div class="grid gap-default">
            <p
              class="text-neutral-1 text-paragraph font-bold font-body-text leading-height-paragraph"
            >
              {t("Skab mindeværdige øjeblikke i hjertet af Valby.")}
            </p>
            <h2
              class="text-neutral-1 font-body-text text-header-3 leading-height-header-3"
            >
              {
                t(
                  "Drømmer du om en hyggelig, personlig ramme til dit næste arrangement? Hos Kær Kaffebar åbner vi dørene for alt fra fødselsdage og firmaevents til PR-events og små, private fester. Vores café byder på en varm atmosfære, smuk indretning og økologiske specialiteter, der sætter prikken over i'et på din dag."
                )
              }
            </h2>
          </div>
          <div class="grid">
            <AnchorLink
              variant="primary"
              url="/arrangement"
              ariaLabel={t("Læs mere")}>{t("Læs mere")}</AnchorLink
            >
          </div>
        </div>
      </article>
    </section>
  </main>

  <!-- Heavy text with animation section -->
  <section
    class="relative px-default lg:px-0 pt-[150px] pb-[150px] max-w-[1192px] mx-auto fade-section my-section"
  >
    <Image
      class="blueberry absolute top-0 left-[-50px] w-[150px] h-[150px]"
      src={BlueberryAndPears}
      alt={t("blåbær og pære illustration")}
      loading="lazy"
    />
    <Image
      class="coffeemug absolute top-4 right-0 w-[90px] h-[90px]"
      src={CoffeeMug}
      alt={t("kaffekop illustration")}
      loading="lazy"
    />
    <cite
      class="block text-center not-italic text-accent text-header-2 font-body-text leading-height-header-2 "
    >
      {
        t(
          "Fra friskbagte boller til brunchtallerkener – vi gør os umage hver dag for at servere mad, der smager af [kær]lighed."
        )
      }
    </cite>

    <Image
      class="lemon absolute bottom-4 right-0 w-[90px] h-[90px]"
      src={TwoWholeLemons}
      alt={t("to citroner illustration")}
      loading="lazy"
    />
    <Image
      class="croissant absolute bottom-0 left-0 w-[90px] h-[90px]"
      src={CroissantIllustration}
      alt={t("croissant illustration")}
      loading="lazy"
    />
  </section>

  <!-- Coffee section -->
  <section class="max-w-[1192px] mx-auto fade-section">
    <ImageTextSection
      headline={t("Kær's kaffe")}
      subheadline={t("God kaffe. God stemning. Godt selskab.")}
      content={t(
        "Hos Kær Kaffebar brygger vi ikke bare kaffe – vi skaber oplevelser. Vi samarbejder med Just Coffee, der leverer økologiske, bæredygtige bønner af højeste kvalitet, så hver eneste kop hos os er fuld af smag, kærlighed og omtanke."
      )}
      imageSrc={CoffeeBacksImage}
      imageAlt={t("just coffee kaffe bønner poser")}
      buttonText={t("Læs mere")}
      url="/menu/#coffeesection"
      roundedBorder="rounded-default"
    />
  </section>

  <!-- Runningclub section -->
  <section
    class="px-default xl:px-0 max-w-[1192px] mx-auto grid gap-large my-section fade-section"
  >
    <h2
      class="text-neutral-1 text-header-1 font-header leading-height-header-1"
    >
      {t("Kær løbeklub")}
    </h2>
    <article class="grid gap-large">
      <div class="grid gap-large md:grid-cols-2">
        <div class="bg-neutral-2 p-large rounded-default md:order-1">
          <h3
            class="text-neutral-1 text-header-3 font-body-text leading-height-header-3"
          >
            {t("Vidste du, at vi også løber sammen?")}
            <strong>{t("Kær Kaffebar's løbeklub")}</strong>
            {t("handler om")}
            <strong>{t("glæde ved bevægelse – ikke præstationer.")}</strong>
          </h3>
        </div>
        <div class="h-[180px] overflow-hidden rounded-full md:h-[200px]">
          <Image
            src={RunningImage}
            alt={t("løbe billede")}
            class="object-cover w-full h-full object-bottom"
            loading="lazy"
          />
        </div>
      </div>
      <div class="grid gap-large md:grid-cols-[1.5fr_0.7fr]">
        <h4
          class="text-neutral-1 text-header-3 font-body-text leading-height-header-2"
        >
          {
            t(
              "Alle er velkomne – uanset form eller erfaring. Kom med næste gang og få motion, smil og måske en ny ven på vejen!"
            )
          }
        </h4>
        <div class="h-[140px] bg-secondary relative rounded-full md:h-[200px]">
          <Image
            src={RunningCoffeeCupIllustration}
            width={120}
            height={120}
            alt={t("løbende kaffekop illustration")}
            class="absolute top-2.5 right-1 md:top-8"
            loading="lazy"
          />
        </div>
      </div>
    </article>
    <div class="grid sm:justify-items-center">
      <AnchorLink
        variant="primary"
        url="/runningclub"
        ariaLabel={t("tilmeld dig løbeklub")}
        >{t("Tilmeld dig løbeklub")}</AnchorLink
      >
    </div>
  </section>
  <!-- Stampcard section -->
  <section
    class="relative flex items-center justify-center flex-col overflow-hidden fade-section px-default mt-[5rem] md:my-section"
  >
    <h2 class="text-header-2 font-header">
      {t("Kær Kaffebar stempelkort")}
    </h2>
    <p class="text-header-3 font-body-text">
      {t("Få din 9. kop på huset med et gratis kaffe stempelkort")}
    </p>
    <Image
      src={Stampcard}
      width={700}
      height={700}
      alt={t("rødt hvidt stempelkort af kær kaffebar")}
      class="relative z-50"
      loading="lazy"
    />
    <div class="absolute top-1/2 left-0 w-full h-full">
      <Marquee />
    </div>
  </section>

  <!-- Gallery section -->
  <section
    class="px-default xl:px-0 max-w-[1192px] mx-auto mb-[5rem] mt-[8rem] md:mt-[15rem] fade-section"
  >
    <GallerySliderSection />
  </section>
</Layout>

<style>
  .fade-image {
    opacity: 0;
    animation-duration: 20s;
    animation-iteration-count: infinite;
    animation-fill-mode: both;
    animation-timing-function: ease-in-out;
    transition: opacity 5s ease-in-out;
    z-index: 0;
  }

  .fade-1 {
    animation-name: fade1;
  }
  .fade-2 {
    animation-name: fade2;
  }
  .fade-3 {
    animation-name: fade3;
  }
  .fade-4 {
    animation-name: fade4;
  }

  @keyframes fade1 {
    0%,
    25% {
      opacity: 1;
    }
    30%,
    100% {
      opacity: 0;
    }
  }

  @keyframes fade2 {
    25%,
    50% {
      opacity: 1;
    }
    0%,
    24%,
    55%,
    100% {
      opacity: 0;
    }
  }

  @keyframes fade3 {
    50%,
    75% {
      opacity: 1;
    }
    0%,
    49%,
    80%,
    100% {
      opacity: 0;
    }
  }

  @keyframes fade4 {
    75%,
    100% {
      opacity: 1;
    }
    0%,
    74% {
      opacity: 0;
    }
  }

  .fade-section {
    opacity: 1;
    transform: translateY(50px);
    will-change: opacity, transform;
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/all";
  gsap.registerPlugin(ScrollTrigger);

  gsap.to(".blueberry", {
    scrollTrigger: {
      trigger: ".blueberry",
      toggleActions: "play pause reverse",
      start: "0px 80%",
      end: "+=500",
    },
    x: 80,
    y: 50,
    rotation: 90,
    duration: 2,
  });

  gsap.to(".coffeemug", {
    scrollTrigger: {
      trigger: ".coffeemug",
      toggleActions: "play pause reverse",
      start: "0px 80%",
      end: "+=500",
    },
    x: -10,
    y: 50,
    rotation: 30,
    duration: 2,
  });

  gsap.to(".croissant", {
    scrollTrigger: {
      trigger: ".croissant",
      toggleActions: "play pause reverse",
      start: "-150px 80%",
      end: "+=500",
    },
    x: 50,
    y: -70,
    rotation: 90,
    duration: 2,
  });

  gsap.to(".lemon", {
    scrollTrigger: {
      trigger: ".lemon",
      toggleActions: "play pause reverse",
      start: "-150px 80%",
      end: "+=500",
    },
    x: -5,
    y: -30,
    rotation: 20,
    duration: 2,
  });

  gsap.utils.toArray(".fade-section").forEach((section) => {
    gsap.from(section, {
      opacity: 0,
      y: 100,
      duration: 1.5,
      ease: "power2.out",
      scrollTrigger: {
        trigger: section,
        start: "top 80%",
      },
    });
  });
</script>
